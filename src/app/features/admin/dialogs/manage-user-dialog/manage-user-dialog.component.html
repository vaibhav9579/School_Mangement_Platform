<div class="w-full mx-auto bg-white p-8 rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold text-gray-700 mb-6">
    {{ action === 'create' ? 'Create User' : action === 'edit' ? 'Edit User' : 'Delete User' }}
  </h2>

  <!-- Show Form only for Create/Edit -->
  <form *ngIf="action !== 'delete'" [formGroup]="userForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Full Name -->
    <div>
      <label class="block text-sm font-medium text-gray-600">Full Name</label>
      <input type="text" formControlName="fullName" placeholder="Enter full name"
        class="mt-1 w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none" />
      <p *ngIf="userForm.get('fullName')?.invalid && userForm.get('fullName')?.touched"
        class="text-red-500 text-sm mt-1">
        Full name is required (min 3 chars).
      </p>
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium text-gray-600">Email</label>
      <input type="email" formControlName="email" placeholder="Enter email"
        class="mt-1 w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none" />
      <p *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched"
        class="text-red-500 text-sm mt-1">
        Valid email is required.
      </p>
    </div>

    <!-- Password (only on create, optional for edit) -->
    <div *ngIf="action === 'create'">
      <label class="block text-sm font-medium text-gray-600">Password</label>
      <input type="password" formControlName="password" placeholder="Enter password"
        class="mt-1 w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none" />
      <p *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched"
        class="text-red-500 text-sm mt-1">
        Password must be at least 6 characters.
      </p>
    </div>

    <!-- Role -->
    <div>
      <label class="block text-sm font-medium text-gray-600">Role</label>
      <select formControlName="role"
        class="mt-1 w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none">
        <option value="">Select a role</option>
        <option *ngFor="let r of roles" [value]="r.id">{{ r.name }}</option>
      </select>
      <p *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched"
        class="text-red-500 text-sm mt-1">
        Role is required.
      </p>
    </div>

    <!-- Actions -->
    <div class="flex justify-end gap-4">
      <button type="button" (click)="onReset()"
        class="px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-xl shadow hover:bg-gray-300">
        Reset
      </button>
      <button type="submit" [disabled]="userForm.invalid"
        class="px-6 py-2 bg-blue-600 text-white font-medium rounded-xl shadow hover:bg-blue-700 disabled:opacity-50">
        {{ action === 'create' ? 'Create' : 'Save Changes' }}
      </button>
    </div>
  </form>

  <!-- Delete Confirmation -->
  <div *ngIf="action === 'delete'" class="space-y-6">
    <p class="text-gray-700">
      Are you sure you want to delete <b>{{ data.user?.name }}</b>?
    </p>
    <div class="flex justify-end gap-4">
      <button mat-button (click)="dialogRef.close()">Cancel</button>
      <button mat-raised-button color="warn" (click)="onSubmit()">Delete</button>
    </div>
  </div>
</div>
